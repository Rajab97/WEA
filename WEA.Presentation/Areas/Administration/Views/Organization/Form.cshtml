@model OrganizationViewModel

<div class="d-flex flex-column-fluid">
    <!--begin::Container-->
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <!--begin::Card-->
                <div class="card card-custom gutter-b example example-compact">
                    <div class="card-header">
                        <h3 class="card-title">@UI.OrganizationDetails</h3>
                    </div>
                    <form class="form" asp-action="Save" asp-controller="Organization" method="post"
                          data-ajax="true"
                          data-ajax-method="POST"
                          data-ajax-begin="onBegin"
                          data-ajax-success="onSuccess"
                          data-ajax-failure="onFailure" style="position:relative;">
                        <input type="hidden" asp-for="Id" />
                        <input type="hidden" asp-for="Version" />
                        <div class="card-body">
                            <div class="form-group row">
                                <div class="col-lg-4">
                                    <label asp-for="OrganizationName"></label>
                                    <input asp-for="OrganizationName" class="form-control" />
                                    <span asp-validation-for="OrganizationName" class="text-danger"></span>
                                </div>
                                <div class="col-lg-4">
                                    <label asp-for="OrganizationAddress"></label>
                                    <input asp-for="OrganizationAddress" class="form-control" />
                                    <span asp-validation-for="OrganizationAddress" class="text-danger"></span>
                                </div>
                                <div class="col-lg-4">
                                    <label asp-for="TelephoneNumber"></label>
                                    <input asp-for="TelephoneNumber" class="form-control" />
                                    <span asp-validation-for="TelephoneNumber" class="text-danger"></span>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <div class="row">
                                <div class="col-lg-6">
                                    @(Html.DevExtreme().Button()
                                    .ID("button")
                                    .Text(UI.Save)
                                    .ElementAttr("class", "btn btn-primary mr-2")
                                    .UseSubmitBehavior(true)
                                )
                                    <button type="submit" class="btn btn-secondary">@UI.Cancel</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts{

    <partial name="_FormScripts">
        <script>
            var KTMaskDemo = function () {

            return {
                // public functions
                init: function () {
                    $('#TelephoneNumber').mask('+(000)00-000-00-00', {
                        placeholder: "+(994)99-999-99-99"
                    });
                }
            };
            }();

        jQuery(document).ready(function () {
            KTMaskDemo.init();
        });

            function onBegin() {
                util.loading(true, "form");
           }
            function onSuccess(data) {
                util.loading(false, "form");
               window.location.href = "@Url.Action(nameof(OrganizationController.Index), OrganizationController.Name)";
           }
            function onFailure(data) {
                util.loading(false, "form");
           }
        </script>
}
