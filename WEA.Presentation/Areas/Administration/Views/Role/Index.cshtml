

<div class="d-flex flex-column-fluid">
    <!--begin::Container-->
    <div class="container-custom">
        <div class="row">
            <div class="col-lg-12">
                <!--begin::Card-->
                <div class="card card-custom gutter-b example example-compact">
                    <partial name="_CrudButtons" />
                    <partial name="_Grid" />
                </div>
            </div>
        </div>
    </div>
</div>

<div class="formModal"></div>


@section Scripts{
    <script>
        function add() {
            util.showModal("@Url.Action(nameof(RoleController.Add),RoleController.Name)", "GET", {}, ".formModal","#newFormModal");
          @* window.location.href = '@Url.Action(nameof(RoleController.Add),RoleController.Name)'*@
        }
        function selectionChangedCallBack(data) {
            console.log(data);
            if (data.IsDefaultRole) {
                $("#btnEdit").prop("disabled", true);
                $("#btnRemove").prop("disabled", true);
            }
        }
        function onBegin() {
            util.loading(true, "form");
        }
        function onSuccess(data) {
            console.log(data);
            util.hideModal();
            dtGrid.reload();
            util.loading(false, "form");
        }
        function onFailure(data) {
            util.loading(false, "form");
            console.log(data);
            console.log("onFailure");
        }
        function edit() {
            util.showModal('@Url.Action(nameof(RoleController.Add), RoleController.Name)?id=' + selectedId, "GET", {}, ".formModal","#newFormModal");
        }
        function remove() {
            Swal.fire({
                title: "@UI.AreYouSure",
                text: "@Html.Raw(UI.AYSDeletInfo)",
                icon:"warning",
                showCancelButton: true,
                confirmButtonText: "@UI.Yes",
                cancelButtonText: "@UI.No"
            }).then(function (result) {
                if (result.value) {
                    ajax.sendRequest("@Url.Action(nameof(RoleController.Remove), RoleController.Name)", "POST",
                        { id: selectedId },
                        function (data) {
                            dtGrid.reload();
                            Swal.fire({
                                position: "top-right",
                                icon: "success",
                                title: "@UI.ProcessSucced",
                                showConfirmButton: false,
                                timer: 1500
                            });
                        },
                        function (data) {
                             Swal.fire({
                                position: "top-right",
                                 icon: "error",
                                 title: "@UI.ProcessFailed",
                                showConfirmButton: false,
                                timer: 1500
                            });
                        }
                    );


                } else if (result.dismiss === "cancel") {

                }
            });
        }
    </script>
}
